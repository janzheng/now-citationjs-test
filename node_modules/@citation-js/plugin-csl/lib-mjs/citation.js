import prepareEngine from './engines';
export default function citation(data, options = {}) {
  const _options$template = options.template,
        template = _options$template === void 0 ? 'apa' : _options$template,
        _options$lang = options.lang,
        lang = _options$lang === void 0 ? 'en-US' : _options$lang,
        _options$format = options.format,
        format = _options$format === void 0 ? 'text' : _options$format;
  const ids = data.map(({
    id
  }) => id);
  const entries = options.entry ? [].concat(options.entry) : ids;
  const citeproc = prepareEngine(data, template, lang, format);
  citeproc.updateItems(ids);
  const citation = citeproc.previewCitationCluster({
    citationItems: entries.map(id => ({
      id
    })),
    properties: {
      noteIndex: 0
    }
  }, [], [], format);
  return citation;
}